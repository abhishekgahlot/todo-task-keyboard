{"version":3,"sources":["components/todoContext.js","components/header.js","components/item.js","components/list.js","hooks/useKeyboardShortcuts.js","utils/utils.js","components/app.js","index.js"],"names":["TodoContext","React","createContext","Header","name","setName","useState","inputEl","useRef","addTodo","currEditIndex","handleManualClick","useContext","useEffect","current","focus","className","ref","placeholder","value","onInput","event","target","onKeyUp","key","onChange","data-testid","onClick","e","Item","todo","idx","updateTodo","deleteTodo","id","completed","editing","setEditing","classNames","data-todokey","type","checked","onDoubleClick","onBlur","List","todos","map","useKeyboardShortcuts","arrowDown","setArrowDown","arrowUp","setArrowUp","shiftEnter","setShiftEnter","keyPressHandler","pressed","shiftKey","downHandler","upHandler","window","addEventListener","removeEventListener","INITIAL_TODOS","App","setTodos","setCurrEditIndex","copy","Array","from","old","find","t","currentIndex","nextIdx","moveUp","todosLength","moveDown","length","getTodoByIdx","Provider","filter","Date","now","overrideIdx","stopPropagation","nearestTodo","closest","Number","getAttribute","render","document","getElementsByTagName"],"mappings":"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","file":"static/js/main.3ed1ad5f.chunk.js","sourcesContent":["import React from 'react';\n\nexport const TodoContext = React.createContext();\n","import React, { useRef, useEffect, useState } from 'react';\nimport { TodoContext } from './todoContext';\n\nconst ENTER_KEY = 'Enter';\n\nexport function Header() {\n  const [name, setName] = useState('');\n  const inputEl = useRef(null);\n  const { addTodo, currEditIndex, handleManualClick } = React.useContext(TodoContext);\n\n  useEffect(() => {\n    // TODO change\n    if (currEditIndex === -1) {\n      inputEl.current.focus();\n    }\n  }, [currEditIndex]);\n\n  const handleChange = event => setName(event.target.value);\n\n  const handleSubmit = event => {\n    if (event.key !== ENTER_KEY) {\n      return;\n    }\n\n    addTodo(name);\n    setName('');\n  };\n\n  return (\n    <header className=\"header\">\n      <h1>todos</h1>\n      <input\n        ref={inputEl}\n        className=\"new-todo\"\n        placeholder=\"What needs to be done?\"\n        value={name}\n        onInput={handleChange}\n        onKeyUp={handleSubmit}\n        onChange={() => {}}\n        data-testid=\"todo-create\"\n        onClick={e => handleManualClick(e, -1)}\n      />\n    </header>\n  );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { TodoContext } from './todoContext';\n\nexport function Item({ todo, idx }) {\n  const { updateTodo, deleteTodo, currEditIndex } = React.useContext(TodoContext);\n  const { id, completed } = todo;\n  const [editing, setEditing] = useState(false);\n  const [name, setName] = useState(todo.name);\n  const inputEl = useRef(null);\n\n  const handleEdit = () => setEditing(true);\n  const handleChange = event => setName(event.target.value);\n  const handleBlur = () => {\n    updateTodo({ ...todo, name });\n    setEditing(false);\n  };\n\n  useEffect(() => {\n    if (currEditIndex === idx) {\n      setEditing(true);\n    }\n  }, [currEditIndex, editing]);\n\n  useEffect(() => {\n    if (editing) {\n      inputEl.current.focus();\n    }\n  }, [editing]);\n\n  return (\n    <li className={classNames({ completed, editing })} data-testid=\"todo-item\" data-todokey={todo.id}>\n      <div className=\"view\">\n        <input\n          className=\"toggle\"\n          type=\"checkbox\"\n          checked={completed}\n          onChange={() => updateTodo({ ...todo, completed: !completed })}\n        />\n        <label onDoubleClick={handleEdit} data-testid=\"todo-name\">\n          {todo.name}\n        </label>\n        <button className=\"destroy\" onClick={() => deleteTodo(id)} data-testid=\"todo-remove\" />\n      </div>\n      {editing && (\n        <input\n          ref={inputEl}\n          className=\"edit\"\n          value={name}\n          onInput={handleChange}\n          onBlur={handleBlur}\n          onChange={() => {}}\n        />\n      )}\n    </li>\n  );\n}\n\nItem.propTypes = {\n  todo: PropTypes.object.isRequired,\n  idx: PropTypes.number.isRequired\n};\n","import React from 'react';\nimport { Item } from './item';\nimport { TodoContext } from './todoContext';\n\nexport function List() {\n  const { todos, handleManualClick } = React.useContext(TodoContext);\n\n  return (\n    <section className=\"main\">\n      <ul className=\"todo-list\" onClick={handleManualClick}>\n        {todos.map((todo, idx) => (\n          <Item key={todo.id} todo={todo} idx={idx} />\n        ))}\n      </ul>\n    </section>\n  );\n}\n","import { useState, useEffect } from 'react';\n\nconst useKeyboardShortcuts = () => {\n  const [arrowDown, setArrowDown] = useState(false);\n  const [arrowUp, setArrowUp] = useState(false);\n  const [shiftEnter, setShiftEnter] = useState(false);\n\n  const keyPressHandler = (pressed, e) => {\n    switch (e.key) {\n      case 'ArrowUp':\n        setArrowUp(pressed);\n        break;\n      case 'ArrowDown':\n        setArrowDown(pressed);\n        break;\n      case 'Enter':\n        setShiftEnter(pressed && e.shiftKey);\n        break;\n      default:\n        break;\n    }\n  };\n\n  const downHandler = e => {\n    keyPressHandler(true, e);\n  };\n\n  const upHandler = e => {\n    keyPressHandler(false, e);\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', downHandler);\n    window.addEventListener('keyup', upHandler);\n\n    return () => {\n      window.removeEventListener('keydown', downHandler);\n      window.removeEventListener('keyup', upHandler);\n    };\n  });\n\n  return [arrowUp, arrowDown, shiftEnter];\n};\n\nexport default useKeyboardShortcuts;\n","export const moveDown = (currentIndex, todosLength) => {\n  const nextIdx = currentIndex + 1;\n  if (nextIdx < todosLength) {\n    return nextIdx;\n  }\n  return currentIndex;\n};\n\nexport const moveUp = currentIndex => {\n  const nextIdx = currentIndex - 1;\n  if (nextIdx >= -1) {\n    return nextIdx;\n  }\n  return currentIndex;\n};\n","import React, { useState, useEffect } from 'react';\nimport { Header } from './header';\nimport { List } from './list';\nimport { TodoContext } from './todoContext';\nimport useKeyboardShortcuts from '../hooks/useKeyboardShortcuts';\n\nimport { moveDown, moveUp } from '../utils/utils';\n\nconst INITIAL_TODOS = [\n  {\n    name: 'Todo 1',\n    completed: false,\n    id: 0\n  },\n  {\n    name: 'Todo 2',\n    completed: true,\n    id: 1\n  }\n];\n\nexport function App() {\n  const [todos, setTodos] = useState(INITIAL_TODOS);\n  const [arrowUp, arrowDown, shiftEnter] = useKeyboardShortcuts();\n  const [currEditIndex, setCurrEditIndex] = useState(-1);\n\n  const updateTodo = todo => {\n    const copy = Array.from(todos);\n    const old = copy.find(t => t.id === todo.id);\n    old.name = todo.name;\n    old.completed = todo.completed;\n    setTodos(copy);\n  };\n  const addTodo = name => setTodos([...todos, { name, id: Date.now() }]);\n  const deleteTodo = id => setTodos(Array.from(todos).filter(t => t.id !== id));\n\n  const handleManualClick = (e, overrideIdx = false) => {\n    if (overrideIdx) {\n      setCurrEditIndex(overrideIdx);\n      return;\n    }\n    e.stopPropagation();\n    const nearestTodo = e.target.closest('li');\n    setCurrEditIndex(Number(nearestTodo.getAttribute('data-todokey')));\n  };\n\n  useEffect(() => {\n    if (arrowUp) {\n      setCurrEditIndex(moveUp(currEditIndex));\n    } else if (arrowDown) {\n      setCurrEditIndex(moveDown(currEditIndex, todos.length));\n    } else if (shiftEnter) {\n      if (currEditIndex > -1) {\n        const getTodoByIdx = { ...todos[currEditIndex], completed: !todos[currEditIndex].completed };\n        updateTodo(getTodoByIdx);\n      }\n    }\n  }, [arrowUp, arrowDown, shiftEnter]);\n\n  return (\n    <div id=\"app\">\n      <section className=\"todoapp\">\n        <TodoContext.Provider value={{ todos, updateTodo, deleteTodo, addTodo, currEditIndex, handleManualClick }}>\n          <Header />\n          {todos.length && <List />}\n        </TodoContext.Provider>\n      </section>\n    </div>\n  );\n}\n","import React from 'react';\nimport { render } from 'react-dom';\nimport 'todomvc-app-css/index.css';\nimport { App } from './components/app';\n\nrender(<App />, document.getElementsByTagName('app-root')[0]);\n"],"sourceRoot":""}