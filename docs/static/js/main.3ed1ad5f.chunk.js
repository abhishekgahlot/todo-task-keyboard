(this["webpackJsonphakeem-take-home"]=this["webpackJsonphakeem-take-home"]||[]).push([[0],{11:function(e,t,o){"use strict";o.r(t);var n=o(0),c=o.n(n),a=o(3);o(9);const s=c.a.createContext();var d=o(1);function r(){const[e,t]=Object(n.useState)(""),o=Object(n.useRef)(null),{addTodo:a,currEditIndex:r,handleManualClick:i}=c.a.useContext(s);Object(n.useEffect)((()=>{-1===r&&o.current.focus()}),[r]);return Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("h1",{children:"todos"}),Object(d.jsx)("input",{ref:o,className:"new-todo",placeholder:"What needs to be done?",value:e,onInput:e=>t(e.target.value),onKeyUp:o=>{"Enter"===o.key&&(a(e),t(""))},onChange:()=>{},"data-testid":"todo-create",onClick:e=>i(e,-1)})]})}var i=o(4),l=o.n(i);function u({todo:e,idx:t}){const{updateTodo:o,deleteTodo:a,currEditIndex:r}=c.a.useContext(s),{id:i,completed:u}=e,[j,b]=Object(n.useState)(!1),[m,p]=Object(n.useState)(e.name),h=Object(n.useRef)(null);return Object(n.useEffect)((()=>{r===t&&b(!0)}),[r,j]),Object(n.useEffect)((()=>{j&&h.current.focus()}),[j]),Object(d.jsxs)("li",{className:l()({completed:u,editing:j}),"data-testid":"todo-item","data-todokey":e.id,children:[Object(d.jsxs)("div",{className:"view",children:[Object(d.jsx)("input",{className:"toggle",type:"checkbox",checked:u,onChange:()=>o({...e,completed:!u})}),Object(d.jsx)("label",{onDoubleClick:()=>b(!0),"data-testid":"todo-name",children:e.name}),Object(d.jsx)("button",{className:"destroy",onClick:()=>a(i),"data-testid":"todo-remove"})]}),j&&Object(d.jsx)("input",{ref:h,className:"edit",value:m,onInput:e=>p(e.target.value),onBlur:()=>{o({...e,name:m}),b(!1)},onChange:()=>{}})]})}function j(){const{todos:e,handleManualClick:t}=c.a.useContext(s);return Object(d.jsx)("section",{className:"main",children:Object(d.jsx)("ul",{className:"todo-list",onClick:t,children:e.map(((e,t)=>Object(d.jsx)(u,{todo:e,idx:t},e.id)))})})}var b=()=>{const[e,t]=Object(n.useState)(!1),[o,c]=Object(n.useState)(!1),[a,s]=Object(n.useState)(!1),d=(e,o)=>{switch(o.key){case"ArrowUp":c(e);break;case"ArrowDown":t(e);break;case"Enter":s(e&&o.shiftKey)}},r=e=>{d(!0,e)},i=e=>{d(!1,e)};return Object(n.useEffect)((()=>(window.addEventListener("keydown",r),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",r),window.removeEventListener("keyup",i)}))),[o,e,a]};const m=[{name:"Todo 1",completed:!1,id:0},{name:"Todo 2",completed:!0,id:1}];function p(){const[e,t]=Object(n.useState)(m),[o,c,a]=b(),[i,l]=Object(n.useState)(-1),u=o=>{const n=Array.from(e),c=n.find((e=>e.id===o.id));c.name=o.name,c.completed=o.completed,t(n)};return Object(n.useEffect)((()=>{if(o)l((e=>{const t=e-1;return t>=-1?t:e})(i));else if(c)l(((e,t)=>{const o=e+1;return o<t?o:e})(i,e.length));else if(a&&i>-1){const t={...e[i],completed:!e[i].completed};u(t)}}),[o,c,a]),Object(d.jsx)("div",{id:"app",children:Object(d.jsx)("section",{className:"todoapp",children:Object(d.jsxs)(s.Provider,{value:{todos:e,updateTodo:u,deleteTodo:o=>t(Array.from(e).filter((e=>e.id!==o))),addTodo:o=>t([...e,{name:o,id:Date.now()}]),currEditIndex:i,handleManualClick:(e,t=!1)=>{if(t)return void l(t);e.stopPropagation();const o=e.target.closest("li");l(Number(o.getAttribute("data-todokey")))}},children:[Object(d.jsx)(r,{}),e.length&&Object(d.jsx)(j,{})]})})})}Object(a.render)(Object(d.jsx)(p,{}),document.getElementsByTagName("app-root")[0])}},[[11,1,2]]]);
//# sourceMappingURL=main.3ed1ad5f.chunk.js.map